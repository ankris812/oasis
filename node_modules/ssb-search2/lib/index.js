"use strict";
const { deferred } = require('ssb-db2/operators');
const WordsIndex = require("./plugin");
module.exports = {
    name: 'search2',
    init(ssb, _config) {
        ssb.db.registerIndex(WordsIndex);
        return {
            operator(text) {
                return deferred((meta, cb, onAbort) => {
                    meta.db.onDrain('search2', () => {
                        const plugin = meta.db.getIndex('search2');
                        plugin.query(text, cb, onAbort);
                    });
                });
            },
        };
    },
};
